!function(t,e){for(var n in e)t[n]=e[n]}(window,function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return a}));var r=150,i={x:"y",y:"x"},o={37:"right",38:"bottom",39:"left",40:"top",83:"top",87:"bottom",65:"right",68:"left"},a=["width","height"]},function(t,e,n){"use strict";function r(t,e){if(!t||1!==t.nodeType)throw new Error("addStyle(".concat(t,", ").concat(e,") failed."));for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n])}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(1);function i(t,e,n){var i=t.options,o="translate(".concat(n.x*i.tileSize,"px, ").concat(n.y*i.tileSize,"px) scale(").concat(i.scale,")"),a="translate(".concat(e.x*i.tileSize,"px, ").concat(e.y*i.tileSize,"px) scale(").concat(i.scale,")");Object(r.a)(e.tileElement,{transform:o}),Object(r.a)(n.tileElement,{transform:a});var c=e.x,u=e.y,s=e.order;e.x=n.x,e.y=n.y,e.order=n.order,n.x=c,n.y=u,n.order=s}},function(t,e,n){"use strict";function r(t,e,n){return t.tiles.filter((function(t){return t.x===e&&t.y===n}))[0]}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t){return t.filter((function(t){return!0===(t&&t.isEmpty)}))[0]}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i}));var r=n(6);function i(e){t.addEventListener&&"function"==typeof t.addEventListener&&t.addEventListener("keydown",r.a.bind(null,e))}}).call(this,n(8))},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(4),i=n(3),o=n(2),a=n(0);function c(t,e){if(t.isPlaying){var n=Object(r.a)(t.tiles);switch(a.c[e.keyCode]){case"top":var c=Object(i.a)(t,n.x,n.y-1);if(!c)return;Object(o.a)(t,c,n);break;case"right":var u=Object(i.a)(t,n.x+1,n.y);if(!u)return;Object(o.a)(t,u,n);break;case"bottom":var s=Object(i.a)(t,n.x,n.y+1);if(!s)return;Object(o.a)(t,s,n);break;case"left":var l=Object(i.a)(t,n.x-1,n.y);if(!l)return;Object(o.a)(t,l,n)}}}},function(t,e,n){t.exports=n(9)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var r={tileSize:120,rows:4,columns:4,difficulty:4,scale:.996,image:{preserve:"width",offset:0}},i=n(0),o=n(1);var a=n(2);var c=n(4);function u(t,e){var n,r,o=t.tiles,u=Object(c.a)(o),s=(r=e,(n=u).x===r.x?"x":n.y===r.y?"y":void 0);if(s){var l=i.b[s];!function(t,e,n){var r=e[0];if(r)if(r.isEmpty)for(var i=1;i<e.length;i++)Object(a.a)(t,r,e[i]);else{var o=e[e.length-1];if(o)for(var c=e.length-1;c>=0;c--)Object(a.a)(t,o,e[c])}}(t,function(t,e,n,r,o){var a=t.tiles,c=i.b[o];return a.filter((function(t){return t[c]>=n[c]&&t[c]<=r[c]&&t[o]===e[o]})).sort((function(t,e){return t[c]>e[c]?-1:t[c]<e[c]?1:0}))}(t,u,e[l]<u[l]?e:u,e[l]<u[l]?u:e,s))}}function s(){this.game.isPlaying&&u(this.game,this.tile)}function l(t){return function(){if(t.isPlaying&&t.isSolved()){clearInterval(t.timer);var e=new Event("solve");e.time=t.time-1,t.stage.dispatchEvent(e),t.isPlaying=!1,function(t){var e=t.tiles,n=t.options,r=5,a=[n.scale,.85],c=[0,-30],u=["y","x"][Math.floor(2*Math.random())],s=setInterval((function(){0===r&&clearInterval(s);for(var t=0;t<e.length;t++){var i=e[t],l=i.x*n.tileSize,f=i.y*n.tileSize,d="translate(".concat(l,"px, ").concat(f,"px) scale(").concat(a[r%a.length],")"),v="rotate(".concat(c[r*i[u]%c.length],"deg)"),p="".concat(d," ").concat(v);Object(o.a)(i.tileElement,{transform:p})}r--}),i.a)}(t)}}}function f(t,e){e.tileElement.addEventListener("click",s.bind({game:t,tile:e})),e.tileElement.addEventListener("transitionend",l(t))}var d=n(5);function v(t,e){if(!e.image.url)throw new Error("You MUST specify the image to use.");if(t.tiles=[],t.isPlaying=!1,t.time=0,e.image.preserve&&i.d.indexOf(e.image.preserve)<0)throw new Error("Invalid value '".concat(e.image.preserve,"' for the option image.preserve"));var n=Object.assign({},r.image,e.image);return t.options=Object.assign({},r,e),t.options.image=n,t.stage=function(t){var e=t.options,n=document.createElement("div");return Object(o.a)(n,{position:"relative",width:"".concat(e.tileSize*e.columns,"px"),height:"".concat(e.tileSize*e.rows,"px")}),n}(t),function(t){for(var e=t.options,n=t.tiles,r=0,a=0;a<e.rows;a++)for(var c=0;c<e.columns;c++){var u=document.createElement("div"),s=c*e.tileSize,l=a*e.tileSize,d=r===e.rows*e.columns-1,v="",p="";"width"===e.image.preserve&&(v="".concat(e.columns*e.tileSize,"px auto"),p="-".concat(s,"px -").concat(l-e.image.offset,"px")),"height"===e.image.preserve&&(v="auto ".concat(e.rows*e.tileSize,"px"),p="-".concat(s-e.image.offset,"px -").concat(l,"px")),Object(o.a)(u,{width:"".concat(e.tileSize,"px"),height:"".concat(e.tileSize,"px"),position:"absolute",left:"0",top:"0",transform:"translate(".concat(s,"px, ").concat(l,"px) scale(").concat(e.scale,")"),transition:"transform ".concat(i.a,"ms linear"),zIndex:1}),d||Object(o.a)(u,{backgroundImage:"url(".concat(e.image.url,")"),backgroundRepeat:"no-repeat",backgroundPosition:p,backgroundSize:v,zIndex:2});var h={x:c,y:a,order:r,isEmpty:d,tileElement:u};f(t,h),n.push(h),r++}}(t),function(t){var e=t.tiles,n=t.stage;if(!(e.length<0))for(var r=0;r<e.length;r++)n.appendChild(e[r].tileElement)}(t),Object(d.a)(t),t.stage}function p(t){var e=new Event("timeupdate");e.time=t.time++,t.stage.dispatchEvent(e)}var h=n(3);function m(t,e){var n=Object(c.a)(t.tiles),r=function(t,e){return[Object(h.a)(t,e.x,e.y-1),Object(h.a)(t,e.x+1,e.y),Object(h.a)(t,e.x,e.y+1),Object(h.a)(t,e.x-1,e.y)].filter((function(t){return t}))}(t,n);r=r.filter((function(t){return t!==e}));var i,o,u=(i=r,(o=Math.floor(Math.random()*i.length))===i.length&&(o-=1),i[o]);return Object(a.a)(t,u,n),u}var g=g||window;function y(t){if(!this||this===g)return new y(t);v(this,t)}y.prototype.render=function(t){var e=document.getElementById(t);if(!e)throw new Error("Could not find HTML element with id: ".concat(t));e.appendChild(this.stage)},y.prototype.start=function(){var t=this;return this.isPlaying?new Promise((function(t){t()})):this.shuffle().then((function(){t.isPlaying=!0,p(t),t.timer=setInterval((function(){p(t)}),1e3),t.stage.dispatchEvent(new Event("start"))}))},y.prototype.isSolved=function(){for(var t=this.tiles,e=0;e<t.length;e++){if(t[e].order!==e)return!1}return!0},y.prototype.shuffle=function(){var t=this,e=this.options;return new Promise((function(n){var r,i=Math.floor(Math.abs(e.difficulty*e.rows*e.columns)),o=setInterval((function(){0===i&&(clearInterval(o),n()),r=m(t,r),i--}),5)}))},y.prototype.onStart=function(t){this.stage.addEventListener("start",t)},y.prototype.onSolve=function(t){var e=this;this.stage.addEventListener("solve",(function(n){clearInterval(e.timer),t.call(e,n),e.time=0}))},y.prototype.onTimeUpdate=function(t){this.stage.addEventListener("timeupdate",t)},n.d(e,"Puzzle",(function(){return y}))}]));